---
interface Props {
  name: string;
  text: string;
  image?: string;
  role?: string;
}

const { name, text, image, role = "Voluntario" } = Astro.props;

// Función para truncar el texto si es demasiado largo
const truncateText = (text: string, maxLength: number = 150) => {
  if (text.length <= maxLength) return text;
  return text.substring(0, maxLength) + '...';
};

const displayText = truncateText(text, 150);
---

<div class="bg-white dark:bg-darkbg/50 p-6 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 border border-gray-100 dark:border-white/5 h-full flex flex-col group">
  <div class="flex items-center mb-4">
    <div class="flex-shrink-0">
      {image ? (
        <img
          src={image || "/placeholder.svg"}
          alt={name}
          class="w-16 h-16 rounded-full object-cover border-2 border-primary/20 group-hover:border-primary transition-colors duration-300"
          loading="lazy"
        />
      ) : (
        <div class="w-16 h-16 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white text-xl font-bold">
          {name.charAt(0)}
        </div>
      )}
    </div>
    
    <div class="ml-4">
      <p class="text-primary dark:text-white font-medium">
        {name}
      </p>
      <p class="text-sm text-gray-500 dark:text-gray-400">
        {role}
      </p>
    </div>
  </div>

  <div class="flex-grow">
    <p class="text-gray-600 dark:text-gray-300 italic relative">
      <span class="text-4xl text-primary/10 absolute -top-2 -left-1">"</span>
      <span class="pl-4">{displayText}</span>
      <span class="text-4xl text-primary/10 absolute -bottom-5 right-0">"</span>
    </p>
  </div>

  <div class="mt-6 pt-4 border-t border-gray-200 dark:border-white/10 flex justify-between items-center">
    <svg class="w-6 h-6 text-secondary/30" fill="currentColor" viewBox="0 0 24 24">
      <path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"/>
      <path d="M13 7h-2v6h6v-2h-4z"/>
    </svg>
    
    {text.length > 150 && (
      <button class="text-xs text-secondary hover:text-primary dark:text-secondary dark:hover:text-white transition-colors">
        Leer más
      </button>
    )}
  </div>
</div>

