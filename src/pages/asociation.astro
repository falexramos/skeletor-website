---
import ContactSection from "@/components/ContactSection.astro";
import HelpSection from "@/components/HelpSection.astro";
import MissionSection from "@/components/MissionSection.astro";
import PageHeader from "@/components/PageHeader.astro";
import Layout from "@/layouts/Layout.astro";

import { getRelativeLocaleUrl } from "astro:i18n";
import { languageList } from "@/i18n/ui";
import { useTranslations } from "@/i18n/utils";

const getPathWithoutLocale = (path: string): string => {
  const segments = path.split("/").filter(Boolean);
  return segments.slice(1).join("/") || "/";
};

const currentPathWithoutLocale = getPathWithoutLocale(Astro.url.pathname);
const currentLang = Astro.currentLocale || "es";
const translateLabels = useTranslations(
  currentLang as keyof typeof languageList
);



// Botones de acci贸n
const actionButtons = [
  {
    text: translateLabels("asociation.action.buttons.text"),
    link: getRelativeLocaleUrl(currentLang, "donate"),
    variant: "primary"
  }
];

// Datos para la secci贸n de ayuda
const helpItems = [
  {
    icon: translateLabels("association.help.items.0.icon"),
    text: translateLabels("association.help.items.0.text")
  },
  {
    icon: translateLabels("association.help.items.1.icon"),
    text: translateLabels("association.help.items.1.text")
  },
  {
    icon: translateLabels("association.help.items.2.icon"),
    text: translateLabels("association.help.items.2.text")
  },
  {
    icon: translateLabels("association.help.items.3.icon"),
    text: translateLabels("association.help.items.3.text")
  },
  {
    icon: translateLabels("association.help.items.4.icon"),
    text: translateLabels("association.help.items.4.text")
  }
];

const contactTexts = {
  title: translateLabels("association.contact.title"),
  highlightedWord: "", 
  description: translateLabels("association.contact.description"),
  callUs: translateLabels("association.contact.callUs"),
  emailUs: translateLabels("association.contact.emailUs"),
  whatsappButton: translateLabels("association.contact.whatsappButton"),
};
const pageTitle = `${translateLabels("association.header.title")} | ${translateLabels("site.title")}`;



---

<Layout title={pageTitle}>
  <PageHeader
    title={translateLabels("association.header.title")}
    highlightedWord={translateLabels("association.header.highlightedWord")}
    description={translateLabels("association.header.description")}
  />


  <MissionSection
  title={translateLabels("association.mission.title")}
  description={translateLabels("association.mission.description")}
  imageUrl={translateLabels("association.mission.imageUrl")}
  ctaText={translateLabels("association.mission.ctaText")}
  ctaLink={getRelativeLocaleUrl(currentLang, "contact")}
  styles={{
    sectionBg: "bg-accent dark:bg-accent",
    titleColor: "text-dark",
    textColor: "text-dark",
    ctaBg: "bg-dark",
    ctaColor: "text-accent dark:text-accent",
    ctaHoverBg: "hover:bg-dark/90 dark:hover:bg-bg-light/70"
  }}
/>



  <!-- Secci贸n de C贸mo Ayudar -->
  <section class="py-20 px-8 bg-light dark:bg-dark">
    <div class="max-w-[90rem] mx-auto">
      <h2 class="text-4xl md:text-5xl font-display font-bold mt-16 mb-8 text-center dark:text-light">{translateLabels("association.collaborate.title")}</h2>
      <div class="grid md:grid-cols-2 gap-16 items-center">
        <div >
          <h3 class="text-3xl font-display font-bold mb-8 dark:text-light">{translateLabels("association.collaborate.subtitle")}</h3>
          <p class="text-xl mb-6 dark:text-light/90">{translateLabels("association.collaborate.description")}</p>
          
          <div class="mt-8 flex flex-wrap gap-4">
            {actionButtons.map((button) => (
              <a
                href={button.link}
                class={`inline-flex items-center px-8 py-4 rounded-full text-lg font-bold transition-colors ${
                  button.variant === 'primary' 
                    ? 'bg-accent text-dark hover:bg-opacity-90' 
                    : 'bg-secondary dark:bg-secondary/30 text-dark dark:text-light hover:bg-opacity-80'
                }`}
              >
                {button.text}
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="w-6 h-6 ml-2"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                </svg>
              </a>
            ))}
          </div>
        </div>
        
        <HelpSection 
          title= {translateLabels("association.help.title")}
          items={helpItems}
          styles={{
            bgColor: "bg-secondary dark:bg-secondary/20",
            titleColor: "dark:text-light",
            textColor: "dark:text-light/90",
            iconColor: "text-accent"
          }}
        />
      </div>
    </div>
  </section>

  <ContactSection texts={contactTexts} />
</Layout>