---
import { getRelativeLocaleUrl } from "astro:i18n";
import { languageList } from "@/i18n/ui";
import { useTranslations } from "@/i18n/utils";
import JoinCommunitySection from "@/components/JoinCommunitySection.astro";
import MissionSection from "@/components/MissionSection.astro";
import PageHeader from "@/components/PageHeader.astro";
import TeamSection from "@/components/TeamSection.astro";
import Layout from "@/layouts/Layout.astro";
import TeamSectionLeade from "@/components/TeamSectionLeade.astro";

const getPathWithoutLocale = (path: string): string => {
  const segments = path.split("/").filter(Boolean);
  return segments.slice(1).join("/") || "/";
};

const currentPathWithoutLocale = getPathWithoutLocale(Astro.url.pathname);
const currentLang = Astro.currentLocale || "es";
const translateLabels = useTranslations(
  currentLang as keyof typeof languageList,
);

const teamPastores = [
  {
    name: translateLabels("team.section.pastores.items.0.name"),
    role: translateLabels("team.section.pastores.items.0.role"),
    image: translateLabels("team.section.pastores.items.0.image"),
  }
];

const team = [
  {
    name: translateLabels("team.section.items.0.name"),
    role: "",
    image: translateLabels("team.section.items.0.image"),
  },
  {
    name: translateLabels("team.section.items.1.name"),
    role: "",
    image: translateLabels("team.section.items.1.image"),
  },
  {
    name: translateLabels("team.section.items.2.name"),
    role: "",
    image: translateLabels("team.section.items.2.image"),
  },
  {
    name: translateLabels("team.section.items.3.name"),
    role: "",
    image: translateLabels("team.section.items.3.image"),
  },
];

// Datos de la comunidad en espa√±ol
const communityButtons = [
  {
    text: translateLabels("community.buttons.text"),
    link: getRelativeLocaleUrl(currentLang, "messages"),
    variant: "primary" as const,
  },
  {
    text: translateLabels("community.buttons.contact"),
    link: getRelativeLocaleUrl(currentLang, "contact"),
    variant: "secondary" as const,
  },
];

const pageTitle = `${translateLabels("nav.about")} | ${translateLabels("site.title")}`;
---

<Layout title={pageTitle}>
  <PageHeader
    title={translateLabels("page.header.about.title")}
    highlightedWord={translateLabels("page.header.about.highlightedWord")}
    description={translateLabels("page.header.about.description")}
  />

  <MissionSection
    title={translateLabels("mission.section.title")}
    description={translateLabels("mission.section.description")}
    imageUrl={translateLabels("mission.section.imageUrl")}
    ctaText={translateLabels("mission.section.ctaText")}
    ctaLink={getRelativeLocaleUrl(currentLang, "contact")}
    styles={{
      sectionBg: "bg-accent dark:bg-accent",
      titleColor: "text-dark",
      textColor: "text-dark",
      ctaBg: "bg-dark",
      ctaColor: "text-accent dark:text-accent",
      ctaHoverBg: "hover:bg-dark/90 dark:hover:bg-bg-light/70",
    }}
  />

  <MissionSection
    title={translateLabels("vision.section.title")}
    description={translateLabels("vision.section.description")}
    imageUrl={translateLabels("vision.section.imageUrl")}
    ctaText={translateLabels("vision.section.ctaText")}
    ctaLink={getRelativeLocaleUrl(currentLang, "contact")}
  />



  <TeamSectionLeade
    title={translateLabels("team.section.title")}
    name= {translateLabels("team.section.pastores.items.0.name")}
    role= {translateLabels("team.section.pastores.items.0.role")}
    image= {translateLabels("team.section.pastores.items.0.image")}
    className="py-8 px-8 bg-accent"
  />

  <TeamSection
    title={translateLabels("team.section.team.title")}
    team={team}
    className="py-8 px-8 bg-light/95"
  />

  <JoinCommunitySection
    title={translateLabels("community.section.title")}
    description={translateLabels("community.section.description")}
    imageUrl={translateLabels("community.section.imageUrl")}
    buttons={communityButtons}
  />
</Layout>
