---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

// Genera las rutas para todos los proyectos
export async function getStaticPaths() {
  const projects = await getCollection('projects');
  
  return projects.map(project => {
    const [lang, slug] = project.slug.split('/');
    return {
      params: { 
        slug 
      },
      props: { project },
    };
  });
}

const { project } = Astro.props;
const { Content } = await project.render();
---

<BaseLayout title={project.data.title}>
  <article class="container mx-auto px-4 py-12">
    <!-- Hero del proyecto -->
    <div class="relative h-[40vh] mb-12 rounded-2xl overflow-hidden">
      <img 
        src={project.data.image} 
        alt={project.data.title}
        class="w-full h-full object-cover"
      />
      <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"></div>
      <div class="absolute bottom-0 left-0 right-0 p-8">
        <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">
          {project.data.title}
        </h1>
        <p class="text-xl text-gray-200">
          {project.data.subtitle}
        </p>
      </div>
    </div>

    <!-- Contenido del proyecto -->
    <div class="prose prose-lg dark:prose-invert max-w-4xl mx-auto">
      <Content />
    </div>
  </article>
</BaseLayout>